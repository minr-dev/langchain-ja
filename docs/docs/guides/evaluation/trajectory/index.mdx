---
sidebar_position: 4
---

# Trajectory Evaluators | 軌道評価者

LangChainのTrajectory Evaluatorsは、エージェントを評価する際により総合的なアプローチを提供します。これらの評価者は、エージェントが取った一連のアクションとそれに対応するレスポンス、すなわち「軌跡」を全体として評価します。これにより、エージェントの効果性と能力をより正確に測定することが可能になります。

> Trajectory Evaluators in LangChain provide a more holistic approach to evaluating an agent. These evaluators assess the full sequence of actions taken by an agent and their corresponding responses, which we refer to as the "trajectory". This allows you to better measure an agent's effectiveness and capabilities.

トラジェクトリー評価器は `AgentTrajectoryEvaluator` インターフェースを実装しており、これには二つの主要なメソッドが必要です：

> A Trajectory Evaluator implements the `AgentTrajectoryEvaluator` interface, which requires two main methods:

* `evaluate_agent_trajectory`: このメソッドは、エージェントの軌跡を同期的に評価します。
  > `evaluate_agent_trajectory`: This method synchronously evaluates an agent's trajectory.
* `aevaluate_agent_trajectory`：この非同期の対応物は、効率を高めるために評価を並行して実行することを可能にします。
  > `aevaluate_agent_trajectory`: This asynchronous counterpart allows evaluations to be run in parallel for efficiency.

両方のメソッドは、3つの主要なパラメータを受け入れます：

> Both methods accept three main parameters:

* `input`: エージェントに最初に与えられる入力。
  > `input`: The initial input given to the agent.
* `prediction`：エージェントからの最終的な予測応答。
  > `prediction`: The final predicted response from the agent.
* `agent_trajectory`：エージェントが取った中間ステップが、タプルのリストとして示されているもの。
  > `agent_trajectory`: The intermediate steps taken by the agent, given as a list of tuples.

これらのメソッドは辞書を返します。カスタム実装では、`score`（エージェントの効果を示す浮動小数点数）と`reasoning`（スコアの背後にある理由付けを説明する文字列）を返すことが推奨されます。

> These methods return a dictionary. It is recommended that custom implementations return a `score` (a float indicating the effectiveness of the agent) and `reasoning` (a string explaining the reasoning behind the score).

`return_intermediate_steps=True` パラメータを使用してエージェントを初期化することで、エージェントの軌跡を捕捉することができます。これにより、特別なコールバックに頼ることなく、すべての中間ステップを収集することが可能です。

> You can capture an agent's trajectory by initializing the agent with the `return_intermediate_steps=True` parameter. This lets you collect all intermediate steps without relying on special callbacks.

Trajectory Evaluatorsの実装と使用についてより深く掘り下げるには、以下のセクションを参照してください。

> For a deeper dive into the implementation and use of Trajectory Evaluators, refer to the sections below.

import DocCardList from "@theme/DocCardList";

<DocCardList />
