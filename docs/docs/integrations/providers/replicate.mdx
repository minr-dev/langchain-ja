# Replicate | レプリケート

このページでは、LangChain内でReplicate上のモデルを実行する方法について説明しています。

> This page covers how to run models on Replicate within LangChain.

## Installation and Setup | インストールとセットアップ

* [Replicate](https://replicate.com)のアカウントを作成してください。APIキーを取得し、環境変数（`REPLICATE_API_TOKEN`）として設定してください。
  > Create a [Replicate](https://replicate.com) account. Get your API key and set it as an environment variable (`REPLICATE_API_TOKEN`)
* `pip install replicate`を使用して[Replicate python client](https://github.com/replicate/replicate-python)をインストールしてください。
  > Install the [Replicate python client](https://github.com/replicate/replicate-python) with `pip install replicate`

## Calling a model | モデルを呼び出す

[Replicate explore page](https://replicate.com/explore)でモデルを見つけ、次の形式でモデル名とバージョンを貼り付けてください：`owner-name/model-name:version`

> Find a model on the [Replicate explore page](https://replicate.com/explore), and then paste in the model name and version in this format: `owner-name/model-name:version`

例えば、この[dolly model](https://replicate.com/replicate/dolly-v2-12b)に関しては、APIタブをクリックしてください。モデル名/バージョンは以下の通りです：`"replicate/dolly-v2-12b:ef0e1aefc61f8e096ebe4db6b2bacc297daf2ef6899f0f7e001ec445893500e5"`

> For example, for this [dolly model](https://replicate.com/replicate/dolly-v2-12b), click on the API tab. The model name/version would be: `"replicate/dolly-v2-12b:ef0e1aefc61f8e096ebe4db6b2bacc297daf2ef6899f0f7e001ec445893500e5"`

`model` パラメータのみが必須ですが、`input={model_param: value, ...}` の形式で他の任意のモデルパラメータも渡せます。

> Only the `model` param is required, but any other model parameters can also be passed in with the format `input={model_param: value, ...}`

例えば、私たちが安定した拡散を実行していて、画像の寸法を変更したい場合：

> For example, if we were running stable diffusion and wanted to change the image dimensions:

```
Replicate(model="stability-ai/stable-diffusion:db21e45d3f7023abc2a46ee38a23973f6dce16bb082a930b0c49861f96d1e5bf", input={'image_dimensions': '512x512'})
```

モデルの最初の出力のみが返されることに注意してください。
ここから、私たちのモデルを初期化することができます：

> *Note that only the first output of a model will be returned.*
> From here, we can initialize our model:

```python
llm = Replicate(model="replicate/dolly-v2-12b:ef0e1aefc61f8e096ebe4db6b2bacc297daf2ef6899f0f7e001ec445893500e5")
```

そして実行してください：

> And run it:

```python
prompt = """
Answer the following yes/no question by reasoning step by step.
Can a dog drive a car?
"""
llm(prompt)
```

この構文を使用して、LLMだけでなく、どのReplicateモデルも呼び出すことができます。たとえば、[Stable Diffusion](https://replicate.com/stability-ai/stable-diffusion)を呼び出すことが可能です：

> We can call any Replicate model (not just LLMs) using this syntax. For example, we can call [Stable Diffusion](https://replicate.com/stability-ai/stable-diffusion):

```python
text2image = Replicate(model="stability-ai/stable-diffusion:db21e45d3f7023abc2a46ee38a23973f6dce16bb082a930b0c49861f96d1e5bf", input={'image_dimensions':'512x512'})

image_output = text2image("A cat riding a motorcycle by Picasso")
```
